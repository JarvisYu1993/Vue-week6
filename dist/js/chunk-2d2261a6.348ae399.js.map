{"version":3,"sources":["webpack:///./src/views/Products.vue","webpack:///./src/components/modalDetail.vue","webpack:///./src/components/modalDetail.vue?0446","webpack:///./src/views/Products.vue?95da"],"names":["class","active","isLoading","ref","product","addCart","products","item","key","id","style","imageUrl","getProduct","disabled","loadingStatus","loadingItem","is_enabled","title","origin_price","price","href","qty","page","pagination","getProductList","tabindex","role","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","src","alt","category","description","content","min","$emit","props","Object","default","data","status","modal","mounted","this","$refs","keyboard","backdrop","methods","openModal","show","hideModal","hide","render","name","cart","components","modalDetail","getProducts","url","$http","get","then","response","success","alert","message","catch","error","console","log","product_id","post","created"],"mappings":"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","file":"js/chunk-2d2261a6.348ae399.js","sourcesContent":["<template>\n  <div class=\"container pt-4\">\n    <Loading :active=\"isLoading\"></Loading>\n    <modal-detail ref=\"modalDetail\" :product=\"product\" @add-cart=\"addCart\"></modal-detail>\n    <h1 class=\"border-bottom pb-2\">商品列表</h1>\n    <ul class=\"productWrap mt-3\">\n      <li class=\"productCard\" v-for=\"item in products\" :key=\"item.id\">\n        <h4 class=\"productType\">新品</h4>\n        <div\n          class=\"productImg\"\n          :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"\n          @click=\"getProduct(item.id)\"\n          :disabled=\"loadingStatus.loadingItem === item.id || !item.is_enabled\"\n        >\n        </div>\n        <div class=\"text-start px-3 pt-3\">\n          <h2 class=\"product_title\">{{ item.title }}</h2>\n          <del class=\"originPrice\">原價：NT${{ item.origin_price }}</del>\n          <p class=\"nowPrice text-danger fw-bold\">特價：NT${{ item.price }}</p>\n        </div>\n        <a\n          href=\"#\"\n          id=\"addCardBtn\"\n          @click.prevent=\"addCart(item.id, (qty = 1))\"\n          :disabled=\"loadingStatus.loadingItem === item.id || !item.is_enabled\"\n        >\n          加入購物車\n        </a>\n      </li>\n    </ul>\n    <pagination :page=\"pagination\" @get-product=\"getProductList\"></pagination>\n  </div>\n</template>\n\n<script>\nimport modalDetail from '@/components/modalDetail.vue'\nimport pagination from '@/components/pagination.vue'\n\nexport default {\n  name: 'Products',\n  data () {\n    return {\n      products: [],\n      product: {},\n      cart: {},\n      loadingStatus: {\n        loadingItem: ''\n      },\n      isLoading: false,\n      pagination: {}\n    }\n  },\n  components: {\n    modalDetail,\n    pagination\n  },\n  methods: {\n    getProducts () {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products`\n      this.$http.get(url)\n        .then((response) => {\n          if (response.data.success) {\n            this.products = response.data.products\n            this.isLoading = false\n          } else {\n            alert(response.data.message)\n            this.isLoading = false\n          }\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    },\n    getProduct (id) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`\n      this.loadingStatus.loadingItem = id\n      this.$http.get(url).then((response) => {\n        if (response.data.success) {\n          this.loadingStatus.loadingItem = ''\n          this.product = response.data.product\n          this.isLoading = false\n          this.$refs.modalDetail.openModal()\n        } else {\n          alert(response.data.message)\n        }\n      })\n    },\n    getProductList (page = 1) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`\n      this.$http.get(url).then((response) => {\n        if (response.data.success) {\n          this.pagination = response.data.pagination\n        } else {\n          alert(response.data.success)\n        }\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n    addCart (id, qty = 1) {\n      this.isLoading = true\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      this.loadingStatus.loadingItem = id\n      const cart = {\n        product_id: id,\n        qty\n      }\n      this.$http.post(url, { data: cart }).then((response) => {\n        if (response.data.success) {\n          alert(response.data.message)\n          this.loadingStatus.loadingItem = ''\n          this.$refs.modalDetail.hideModal()\n          this.isLoading = false\n        } else {\n          alert(response.data.message)\n        }\n      })\n    }\n  },\n  created () {\n    this.getProducts()\n    this.getProductList()\n  }\n}\n</script>\n","<template>\n  <div class=\"modal fade\" id=\"modalDetail\" tabindex=\"-1\" role=\"dialog\"\n       aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n        <div class=\"modal-dialog modal-xl\" role=\"document\">\n          <div class=\"modal-content border-0\">\n            <div class=\"modal-header bg-dark text-white\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n                <span>{{ product.title }}</span>\n              </h5>\n              <button type=\"button\" class=\"btn-close\"\n                      data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"row\">\n                <div class=\"col-sm-6\">\n                  <img class=\"img-fluid\" :src=\"product.imageUrl\" alt=\"\">\n                </div>\n                <div class=\"col-sm-6\">\n                  <span class=\"badge bg-primary rounded-pill mb-2\">{{ product.category }}</span>\n                  <p>商品描述：{{ product.description }}</p>\n                  <p>商品內容：{{ product.content }}</p>\n                  <div class=\"d-flex flex-column align-items-end mb-2\">\n                    <del class=\"h6\" v-if=\"product.price\">原價：NT${{ product.origin_price }} 元</del>\n                    <p class=\"h4 text-danger mt-2\" v-if=\"product.price\">特價：NT${{product.price}}元</p>\n                  </div>\n                  <div class=\"d-flex flex-column\">\n                    <input type=\"number\" class=\"form-control mb-2\"\n                    v-model.number=\"qty\" min=\"1\">\n                    <button type=\"button\" class=\"addBtn\" @click=\"$emit('add-cart', product.id, qty)\">加入購物車</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal.js'\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default () {\n        return {\n        }\n      }\n    }\n  },\n  data () {\n    return {\n      status: {},\n      modal: '',\n      qty: 1\n    }\n  },\n  mounted () {\n    this.modal = new Modal(this.$refs.modal, {\n      keyboard: false,\n      backdrop: 'static'\n    })\n  },\n  methods: {\n    openModal () {\n      this.modal.show()\n    },\n    hideModal () {\n      this.modal.hide()\n    }\n  }\n}\n</script>\n","import { render } from \"./modalDetail.vue?vue&type=template&id=41b4fd47\"\nimport script from \"./modalDetail.vue?vue&type=script&lang=js\"\nexport * from \"./modalDetail.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Products.vue?vue&type=template&id=6f8d1752\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}